{"createdAt":"2025-02-05T05:27:19.105Z","updatedAt":"2025-02-05T07:49:30.599Z","id":"wmFxs5SLCkw6d2Ua","name":"Recherche d'emploi","active":false,"nodes":[{"parameters":{"options":{"allowFileUploads":true}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-420,-160],"id":"a59d5d1c-a1bb-4617-b220-bbabac622d1e","name":"When chat message received","webhookId":"1a9197e3-fbca-4863-90d8-23b7796d0514"},{"parameters":{},"name":"Start","type":"n8n-nodes-base.start","typeVersion":1,"position":[-420,-420],"id":"ab2b6662-863e-4b02-9977-c6d706258677"},{"parameters":{"values":{"string":[{"name":"q","value":"technicien methodes"},{"name":"locality","value":"fr"},{"name":"page","value":"1"},{"name":"sort","value":"date"},{"name":"location","value":"cluses"}]},"options":{}},"name":"Set Search Parameters","type":"n8n-nodes-base.set","typeVersion":1,"position":[-160,-160],"id":"97c3138a-1dc0-4f88-805a-60798da98a3f"},{"parameters":{"url":"https://indeed12.p.rapidapi.com/jobs/search","options":{},"headerParametersUi":{"parameter":[{"name":"X-RapidAPI-Key","value":"20db81a5d3msh4fa2a97afeac76ep1ec0a0jsn8c0ce792a095"},{"name":"X-RapidAPI-Host","value":"indeed12.p.rapidapi.com"}]},"queryParametersUi":{"parameter":[{"name":"query","value":"={{$json[\"q\"]}}"},{"name":"=locality","value":"={{ $json.locality }}"},{"name":"page","value":"={{$json[\"page\"]}}"},{"name":"sort","value":"={{$json[\"sort\"]}}"},{"name":"=location","value":"={{ $json.location }}"}]}},"name":"HTTP Request - Indeed API1","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[80,-160],"id":"9e6766e0-350a-43ca-8e07-46091723f29c"},{"parameters":{"url":"http://localhost:11434/format-request","jsonParameters":true,"options":{}},"name":"Format Request","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-1280,180],"id":"7ee8ed9b-0ec8-4e5a-b5bd-f4ebd1bd3bd4"},{"parameters":{"authentication":"headerAuth","url":"https://customsearch.googleapis.com/customsearch/v1","options":{"useQueryString":false},"headerParametersUi":{"parameter":[{"name":"Authorization","value":"Basic AIzaSyCinZYl58rnUTPpNX_xzqdAGnc6uPak-FE"}]},"queryParametersUi":{"parameter":[{"name":"cx","value":"f5db20188c61d409d"},{"name":"q","value":"test"}]}},"name":"Google Search","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-1020,120],"id":"d51d6dff-2918-429f-895c-9b2ef6385b95","credentials":{"httpHeaderAuth":{"id":"NorxHsiDsQ2QH1Wm","name":"Header Auth Googlesearch"}}},{"parameters":{"url":"https://active-jobs-db.p.rapidapi.com/jobs","jsonParameters":true,"options":{},"headerParametersJson":"{\"x-rapidapi-key\": \"YOUR_ACTIVE_JOBS_API_KEY\"}","queryParametersJson":"{\"title_filter\": \"{{$node[\\\"Format Request\\\"].json[\\\"titre\\\"]}}\", \"location_filter\": \"{{$node[\\\"Format Request\\\"].json[\\\"localisation\\\"]}}\", \"limit\": 100}"},"name":"Active Jobs API","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-1020,220],"id":"e71e06aa-9d8d-4327-aeeb-987cc756b3c7"},{"parameters":{"url":"https://jobs-api14.p.rapidapi.com/list","jsonParameters":true,"options":{},"headerParametersJson":"{\"x-rapidapi-key\": \"YOUR_JOBS_API_KEY\"}","queryParametersJson":"{\"query\": \"{{$node[\\\"Format Request\\\"].json[\\\"titre\\\"]}}\", \"location\": \"{{$node[\\\"Format Request\\\"].json[\\\"localisation\\\"]}}\"}"},"name":"Jobs API","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-1020,320],"id":"4f4127cd-ba23-44d2-a2e8-82dad3e1e888"},{"parameters":{"url":"https://jsearch.p.rapidapi.com/search","jsonParameters":true,"options":{},"headerParametersJson":"{\"x-rapidapi-key\": \"YOUR_JSEARCH_API_KEY\"}","queryParametersJson":"{\"query\": \"{{$node[\\\"Format Request\\\"].json[\\\"titre\\\"]}}\", \"location\": \"{{$node[\\\"Format Request\\\"].json[\\\"localisation\\\"]}}\", \"num_pages\": 1}"},"name":"JSearch API","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-1020,420],"id":"f50b822a-d468-4336-bac9-8254f8fd8b43"},{"parameters":{"url":"https://rapidapi.com/mantiks-mantiks-default/api/indeed12/playground/apiendpoint_28ad128d-d110-4055-8b19-0fd6f5a4105a","jsonParameters":true,"options":{},"headerParametersJson":"{\"x-rapidapi-key\": \"YOUR_INDEED_API_KEY\"}","queryParametersJson":"{\"query\": \"{{$node[\\\"Format Request\\\"].json[\\\"titre\\\"]}}\", \"location\": \"{{$node[\\\"Format Request\\\"].json[\\\"localisation\\\"]}}\"}"},"name":"Indeed API","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-1020,520],"id":"b162fed4-bc90-4f31-80b6-0ec70abd1ec4"},{"parameters":{"mode":"mergeByKey"},"name":"Merge Results","type":"n8n-nodes-base.merge","typeVersion":1,"position":[-780,320],"id":"6fa69497-f88d-4f50-9146-5590fc547cca"},{"parameters":{"functionCode":"items = items.reduce((acc, curr) => {\n    // DÃ©duplication simple par comparaison de l'URL\n    if (!acc.find(item => item.json.url === curr.json.url)) {\n        acc.push(curr);\n    }\n    return acc;\n}, []);\nreturn items;"},"name":"Filter & Deduplicate","type":"n8n-nodes-base.function","typeVersion":1,"position":[-520,320],"id":"0c56dd82-1ef7-4698-9f0d-33c9dbaa1c51"},{"parameters":{"url":"http://localhost:11434/deep-analysis","jsonParameters":true,"options":{}},"name":"Deep Analysis","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-280,320],"id":"83e64550-d55d-4aec-b53f-6699575fe1e7"},{"parameters":{"url":"http://localhost:11434/generate-motivation-letter","jsonParameters":true,"options":{}},"name":"Generate Motivation Letter","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-60,180],"id":"a1b82485-6639-45a9-aad4-65fb9863a7f1"},{"parameters":{"url":"http://localhost:11434/modify-cv","jsonParameters":true,"options":{}},"name":"Modify CV","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-60,440],"id":"d467442c-47f0-49d1-8771-482b1e84b158"},{"parameters":{"url":"http://nomic-embed-text/generate","jsonParameters":true,"options":{}},"name":"Generate Embeddings","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[220,400],"id":"8a0fe28e-cb36-4b27-8735-7ecaba07b178"},{"parameters":{"url":"http://localhost:6333/collections/emploi/points","jsonParameters":true,"options":{}},"name":"Index in Qdrant","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[480,400],"id":"d645301c-79e2-4be5-8355-48a5b0162c0b"},{"parameters":{"functionCode":"items = items.map(item => {\n    // Formatage final de chaque offre\n    return {\n        json: {\n            title: item.json.title || \"\",\n            company: item.json.company || \"\",\n            location: item.json.location || \"\",\n            description: item.json.description || \"\",\n            url: item.json.url || \"\",\n            analysis: item.json.analysis || {}\n        }\n    };\n});\nreturn items;"},"name":"Format Final Output","type":"n8n-nodes-base.function","typeVersion":1,"position":[700,440],"id":"5fc3687c-836a-4b5e-86fb-9f7c9c766a9a"},{"parameters":{"functionCode":"console.log('Debug Info:', items);\nreturn items;"},"name":"Debug Logger","type":"n8n-nodes-base.function","typeVersion":1,"position":[880,160],"id":"5c5e23e0-c51d-4b76-8ccc-9496db119c23"},{"parameters":{"values":{"string":[{"name":"finalOutput","value":"={{$json}}"}]},"options":{}},"name":"Output Final","type":"n8n-nodes-base.set","typeVersion":1,"position":[1180,260],"id":"412e624a-7223-421f-b625-7e826c481db9"},{"parameters":{},"name":"Start1","type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-1520,180],"id":"69b4aee6-94fd-4d9c-9081-2ed5b9bc3cf5"}],"connections":{"Set Search Parameters":{"main":[[{"node":"HTTP Request - Indeed API1","type":"main","index":0}]]},"HTTP Request - Indeed API1":{"main":[[]]},"When chat message received":{"main":[[{"node":"Set Search Parameters","type":"main","index":0}]]},"Start":{"main":[[{"node":"Set Search Parameters","type":"main","index":0}]]},"Format Request":{"main":[[{"node":"Google Search","type":"main","index":0},{"node":"Active Jobs API","type":"main","index":0},{"node":"Jobs API","type":"main","index":0},{"node":"JSearch API","type":"main","index":0},{"node":"Indeed API","type":"main","index":0}]]},"Google Search":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"Active Jobs API":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"Jobs API":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"JSearch API":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"Indeed API":{"main":[[{"node":"Merge Results","type":"main","index":0}]]},"Merge Results":{"main":[[{"node":"Filter & Deduplicate","type":"main","index":0}]]},"Filter & Deduplicate":{"main":[[{"node":"Deep Analysis","type":"main","index":0}]]},"Deep Analysis":{"main":[[{"node":"Generate Motivation Letter","type":"main","index":0},{"node":"Modify CV","type":"main","index":0}]]},"Generate Motivation Letter":{"main":[[{"node":"Generate Embeddings","type":"main","index":0}]]},"Modify CV":{"main":[[{"node":"Generate Embeddings","type":"main","index":0}]]},"Generate Embeddings":{"main":[[{"node":"Index in Qdrant","type":"main","index":0}]]},"Index in Qdrant":{"main":[[{"node":"Format Final Output","type":"main","index":0}]]},"Format Final Output":{"main":[[{"node":"Debug Logger","type":"main","index":0},{"node":"Output Final","type":"main","index":0}]]},"Debug Logger":{"main":[[{"node":"Output Final","type":"main","index":0}]]},"Start1":{"main":[[{"node":"Format Request","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"8bcfed78-b381-47ee-9d97-1680cd40c539","triggerCount":0,"tags":[],"repo_owner":"Olivier340","repo_name":"n8n-worklow","repo_path":"","subPath":"2025/02/"}