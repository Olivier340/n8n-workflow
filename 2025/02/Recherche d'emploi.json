{"createdAt":"2025-02-05T05:27:19.105Z","updatedAt":"2025-03-25T08:39:51.297Z","id":"wmFxs5SLCkw6d2Ua","name":"Recherche d'emploi","active":true,"nodes":[{"parameters":{"values":{"string":[{"name":"q","value":"technicien methodes"},{"name":"locality","value":"fr"},{"name":"page","value":"1"},{"name":"sort","value":"date"},{"name":"location","value":"cluses"}]},"options":{}},"name":"Set Search Parameters","type":"n8n-nodes-base.set","typeVersion":1,"position":[-2200,-620],"id":"97c3138a-1dc0-4f88-805a-60798da98a3f"},{"parameters":{"authentication":"headerAuth","url":"https://jobs-api14.p.rapidapi.com/v2/list","options":{},"headerParametersUi":{"parameter":[{"name":"x-rapidapi-host","value":"jobs-api14.p.rapidapi.com"}]},"queryParametersUi":{"parameter":[{"name":"query","value":"={{ $json.q }}"},{"name":"location","value":"={{ $json.location }}"}]}},"name":"Jobs API","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-1640,-720],"id":"4f4127cd-ba23-44d2-a2e8-82dad3e1e888","credentials":{"httpHeaderAuth":{"id":"sgOE2BzhDy5BIQZo","name":"Header Auth Rapid API"}}},{"parameters":{"authentication":"headerAuth","url":"https://jsearch.p.rapidapi.com/search","options":{},"headerParametersUi":{"parameter":[{"name":"x-rapidapi-host","value":"jsearch.p.rapidapi.com"}]},"queryParametersUi":{"parameter":[{"name":"country","value":"=fr"},{"name":"query","value":"={{ $json.q }} in  {{ $json.location }}"}]}},"name":"JSearch API","type":"n8n-nodes-base.httpRequest","typeVersion":1,"position":[-1640,-520],"id":"f50b822a-d468-4336-bac9-8254f8fd8b43","credentials":{"httpHeaderAuth":{"id":"sgOE2BzhDy5BIQZo","name":"Header Auth Rapid API"}}},{"parameters":{"promptType":"define","text":"=Analyse Approfondie des Offres :\nObjectif : D√©livrer une analyse d√©taill√©e des comp√©tences et de la culture d‚Äôentreprise en fonction de l'offre d'emploi :\n {{ $json.company }} {{ $json.postedAt }} {{ $json.salary }} {{ $json.location }}\n{{ $json.positionName }} {{ $json.jobType }}\n{{ $json.url }}\n{{ $json.descriptionHTML }}\n\nD√©tails :\nComp√©tences : Identifier les comp√©tences mentionn√©es et d√©tecter celles pertinentes pour le profil de l‚Äôutilisateur.\nCulture d‚Äôentreprise : Analyser la culture √† partir des informations disponibles.\nCorrespondance Profil-Poste : √âvaluer la correspondance des comp√©tences de l‚Äôutilisateur avec celles requises.\n5. Pr√©sentation Structur√©e des R√©sultats :\nObjectif : Pr√©senter les offres de mani√®re claire et d√©taill√©e.\nLangue : R√©pondre dans la langue de l‚Äôutilisateur.\nFormat : r√©pondre au format json\n","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[-3760,-80],"id":"9fa43a53-bd36-48fe-a867-0f1948ee8262","name":"AI Agent"},{"parameters":{"model":"mistral:latest","options":{"temperature":0.2}},"type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[-3820,200],"id":"f59f8942-634d-43e2-8411-e06fc0deaf49","name":"Ollama Chat Model","credentials":{"ollamaApi":{"id":"NS8KtD03um6xedJo","name":"Ollama account"}}},{"parameters":{"resource":"databasePage","databaseId":{"__rl":true,"value":"cd874998-c309-48d0-984c-db009335a4e4","mode":"list","cachedResultName":"Offres d‚Äôemploi","cachedResultUrl":"https://www.notion.so/cd874998c30948d0984cdb009335a4e4"},"options":{}},"type":"n8n-nodes-base.notionTool","typeVersion":2.2,"position":[-3500,160],"id":"46bd249e-1cbc-42c6-b51d-9b5dc6365640","name":"Notion","credentials":{"notionApi":{"id":"ZIBjC8b9OWhjO7wH","name":"Notion account"}}},{"parameters":{"method":"POST","url":"https://api.apify.com/v2/acts/misceres~indeed-scraper/run-sync-get-dataset-items?token=apify_api_s7Kq2WTJPCNPRNhefglhou1Dnll3q602yFKG","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n    \"country\": \"{{ $json.locality.toUpperCase() }}\",\n    \"followApplyRedirects\": false,\n    \"location\": \"{{ $json.location }}\",\n    \"maxItems\": 20,\n    \"parseCompanyDetails\": false,\n    \"position\": \"{{ $json.q }}\",\n    \"saveOnlyUniqueItems\": true\n}","options":{}},"id":"1466f46c-0fac-445c-8e2a-a0d393f0695a","name":"run Actor Indeed","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-1640,-980],"alwaysOutputData":true,"credentials":{"httpHeaderAuth":{"id":"but6yVhPbQehPuro","name":"Header Auth Apify"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.1,"position":[-620,-540],"id":"e6cd576f-dd07-426a-b119-914568b3314d","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"d4zSwzevlcDFPS3v","name":"OpenAi account"}}},{"parameters":{},"id":"3e5d2e28-00cc-4458-ba72-337ad7273813","name":"Postgres Chat Memory","type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.1,"position":[820,-640],"credentials":{"postgres":{"id":"gPu37zS904wrxDaM","name":"Postgres account"}}},{"parameters":{"model":"llama3.1:latest","options":{}},"id":"db3085e9-e698-4e77-be97-e167898c3f4a","name":"Ollama Model","type":"@n8n/n8n-nodes-langchain.lmOllama","typeVersion":1,"position":[1700,-700],"credentials":{"ollamaApi":{"id":"NS8KtD03um6xedJo","name":"Ollama account"}}},{"parameters":{"name":"SearchJob","topK":3},"id":"87703cf0-a605-4a2d-82ba-baaf3e27b830","name":"Vector Store Tool","type":"@n8n/n8n-nodes-langchain.toolVectorStore","typeVersion":1,"position":[1480,-860]},{"parameters":{"model":"nomic-embed-text:latest"},"id":"8cc71d24-60e3-4a27-a42f-befd9cdeadae","name":"Embeddings Ollama","type":"@n8n/n8n-nodes-langchain.embeddingsOllama","typeVersion":1,"position":[1340,-560],"credentials":{"ollamaApi":{"id":"NS8KtD03um6xedJo","name":"Ollama account"}}},{"parameters":{"assignments":{"assignments":[{"id":"10646eae-ae46-4327-a4dc-9987c2d76173","name":"file_id","value":"={{ $json.ajoutes[0].fileId ? $json.ajoutes[0].fileId : ($json.modifies[0].fileId ? $json.modifies[0].fileId : null) }}","type":"string"},{"id":"dd0aa081-79e7-4714-8a67-1e898285554c","name":"folder_id","value":"={{ $json.ajoutes[0].parentFolderId ? $json.ajoutes[0].parentFolderId : ($json.modifies[0].parentFolderId ? $json.modifies[0].parentFolderId : null) }}","type":"string"},{"id":"93140101-35da-4e98-950b-2f95636db22f","name":"status","value":"={{ $json.ajoutes[0].fileId ? \"Ajout√©\" : ($json.modifies[0].fileId ? \"Modifi√©\" : \"Aucun changement\") }}","type":"string"}]},"options":{}},"id":"1edf55bc-36ae-40e3-bd47-88c0b1dc9aed","name":"Set File ID","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-920,380],"alwaysOutputData":true},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $('Set File ID').item.json.file_id }}","mode":"id"},"options":{"googleFileConversion":{"conversion":{"docsToFormat":"text/plain"}}}},"id":"41303c24-b00c-4c88-9c82-18c2d8402092","name":"Download File","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[-280,360],"executeOnce":true,"credentials":{"googleDriveOAuth2Api":{"id":"Mu7yxTxQSL3Ke6rX","name":"Google Drive account"}}},{"parameters":{"options":{"metadata":{"metadataValues":[{"name":"file_id","value":"={{ $('Set File ID').item.json.file_id }}"},{"name":"folder_id","value":"={{ $('Set File ID').item.json.folder_id }}"}]}}},"id":"c3b59f6d-114a-477d-987d-87508b53b11b","name":"Default Data Loader","type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[560,360]},{"parameters":{"chunkOverlap":100,"options":{}},"id":"042b304e-1e1d-4f20-903e-bd8ac124c6c4","name":"Recursive Character Text Splitter","type":"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter","typeVersion":1,"position":[600,580]},{"parameters":{"model":"nomic-embed-text:latest"},"id":"16912e07-469b-4e9e-a1db-f2e0544d6a53","name":"Embeddings Ollama1","type":"@n8n/n8n-nodes-langchain.embeddingsOllama","typeVersion":1,"position":[440,360],"credentials":{"ollamaApi":{"id":"NS8KtD03um6xedJo","name":"Ollama account"}}},{"parameters":{"content":"## Local RAG AI Agent with Chat Interface","height":527.3027193303974,"width":969.0343804425795},"id":"c73894b7-3925-4206-a763-f93400931caf","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[300,-980]},{"parameters":{"content":"## Agent Tools for Local RAG","height":528.85546469693,"width":583.4552380860637,"color":4},"id":"f7e54fb9-f4c7-4c8f-9380-d0fa12f52666","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1280,-980]},{"parameters":{"content":"## Workflow to Create Local Knowledgebase from Google Drive Folder","height":1065,"width":2549,"color":5},"id":"870d61d3-8733-44a6-bb50-a47226473c38","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1360,-300]},{"parameters":{"options":{}},"id":"8fb8824e-4cf8-44c0-87bd-75a406d1040d","name":"When chat message received","type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[360,-860],"webhookId":"cb31b294-29c2-416c-8a2c-4aee3bf352c0"},{"parameters":{"qdrantCollection":{"__rl":true,"value":"SearchJob","mode":"list","cachedResultName":"SearchJob"},"options":{}},"id":"e46ccaa7-2880-4bed-81f0-8f803dc07c7e","name":"Qdrant Vector Store","type":"@n8n/n8n-nodes-langchain.vectorStoreQdrant","typeVersion":1,"position":[1300,-720],"credentials":{"qdrantApi":{"id":"Aeqltub5twyeo8GY","name":"QdrantApi account"}}},{"parameters":{"code":{"execute":{"code":"try {\n    console.log(\"üìå D√©but du script - V√©rification des fichiers √† supprimer dans Qdrant.\");\n\n    const { QdrantVectorStore } = require(\"@langchain/qdrant\");\n    const { OllamaEmbeddings } = require(\"@langchain/community/embeddings/ollama\");\n\n    // V√©rification de l'entr√©e\n    if (!this.getInputData().length || !this.getInputData()[0].json) {\n        throw new Error(\"‚ö†Ô∏è Aucune donn√©e re√ßue en entr√©e !\");\n    }\n\n    console.log(\"‚úÖ Donn√©es re√ßues :\", this.getInputData()[0].json);\n\n    // Extraction des donn√©es\n    const fileIdToDelete = this.getInputData()[0].json.file_id;\n    const folderId = this.getInputData()[0].json.folder_id;\n    const fileStatus = this.getInputData()[0].json.status;\n\n    console.log(`üìÇ Fichier d√©tect√© : ${fileIdToDelete} (Statut : ${fileStatus})`);\n\n    if (!fileIdToDelete) {\n        throw new Error(\"‚ö†Ô∏è Erreur : Aucune file_id d√©tect√©e !\");\n    }\n\n    // Connexion √† Qdrant\n    const embeddings = new OllamaEmbeddings({\n        model: \"nomic-embed-text\",\n        baseUrl: \"http://ollama:11434\"\n    });\n\n    console.log(\"‚úÖ Embeddings charg√©s.\");\n\n    const vectorStore = await QdrantVectorStore.fromExistingCollection(\n        embeddings,\n        {\n            url: \"http://qdrant:6333\",\n            collectionName: \"SearchJob\",\n        }\n    );\n\n    console.log(\"‚úÖ Connexion √† Qdrant r√©ussie.\");\n\n    // D√©finition du filtre pour supprimer le fichier dans Qdrant\n    const filter = {\n        must: [\n            {\n                key: \"metadata.file_id\",\n                match: {\n                    value: fileIdToDelete,\n                },\n            },\n        ],\n    };\n\n    console.log(\"üîç Filtre utilis√© pour la suppression :\", JSON.stringify(filter));\n\n    // Suppression des vecteurs si le fichier est supprim√© ou modifi√©\n    const response = await vectorStore.client.delete(\"SearchJob\", { filter });\n\n    console.log(\"üóëÔ∏è Suppression des anciens vecteurs termin√©e :\", response);\n\n    return [{ json: { file_id: fileIdToDelete, folder_id: folderId, status: fileStatus, result: \"Deleted from Qdrant\" } }];\n\n} catch (error) {\n    console.error(\"‚ùå Erreur dans 'Clear Old Vectors' :\", error.message);\n    return [{ json: { error: error.message } }];\n}\n"}},"inputs":{"input":[{"type":"main","required":true}]},"outputs":{"output":[{"type":"main"}]}},"id":"136e9a9f-a454-4b96-adf6-59160c7123b4","name":"Clear Old Vectors","type":"@n8n/n8n-nodes-langchain.code","typeVersion":1,"position":[-460,360],"alwaysOutputData":true},{"parameters":{"mode":"insert","qdrantCollection":{"__rl":true,"value":"=SearchJob","mode":"id"},"options":{}},"id":"2caed3d3-65f3-4429-861d-4fdf7f9dd4f0","name":"Qdrant Vector Store Insert","type":"@n8n/n8n-nodes-langchain.vectorStoreQdrant","typeVersion":1,"position":[500,120],"credentials":{"qdrantApi":{"id":"Aeqltub5twyeo8GY","name":"QdrantApi account"}}},{"parameters":{"respondWith":"allIncomingItems","options":{}},"id":"4f8825bd-808e-4349-9a20-476153712686","name":"Respond to Webhook","type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[1080,-860]},{"parameters":{"httpMethod":"POST","path":"6e96bb59-5289-4b86-b383-f276ba62b4e1","responseMode":"responseNode","options":{}},"id":"8e22994d-adcd-4f16-b5b0-b353b20f39e8","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":2,"position":[360,-680],"webhookId":"6e96bb59-5289-4b86-b383-f276ba62b4e1"},{"parameters":{"assignments":{"assignments":[{"id":"75ebfdef-c8e2-4c3e-b716-1479d0cc2a73","name":"chatInput","value":"={{ $json?.chatInput || $json.body.chatInput }}","type":"string"},{"id":"59b7a20f-0626-4861-93e2-015d430c266e","name":"sessionId","value":"={{ $json?.sessionId || $json.body.sessionId}}","type":"string"}]},"options":{}},"id":"5179d0fb-765e-4470-8bcd-fcd9bb9a3b9c","name":"Edit Fields","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[560,-860]},{"parameters":{"triggerOn":"folder","path":"/data/paperport/","events":["add","change","unlink"],"options":{"awaitWriteFinish":true,"followSymlinks":true,"depth":0,"usePolling":true}},"type":"n8n-nodes-base.localFileTrigger","typeVersion":1,"position":[-3920,1880],"id":"b30608df-5008-41e6-9887-d416a45c56b3","name":"Local File Trigger"},{"parameters":{"assignments":{"assignments":[]},"includeOtherFields":true,"options":{"dotNotation":false}},"id":"cdb60d2e-2114-44df-8820-a9b975eb04a9","name":"Set File ID1","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3580,1880]},{"parameters":{"fileSelector":"={{ $json.path }}","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-3300,1880],"id":"920315ee-6c0b-4984-bbdf-ee5d6210a193","name":"Read/Write Files from Disk"},{"parameters":{"model":"llama3.1:latest","options":{}},"id":"859d2c6a-1869-424c-a900-3fdbac2ee8d0","name":"Ollama Chat Model1","type":"@n8n/n8n-nodes-langchain.lmChatOllama","typeVersion":1,"position":[660,-640],"credentials":{"ollamaApi":{"id":"NS8KtD03um6xedJo","name":"Ollama account"}}},{"parameters":{"options":{"systemMessage":"You are a helpful assistant","returnIntermediateSteps":false}},"id":"006dfec8-5405-4b39-b085-3ac194f70d3b","name":"AI Agent1","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.6,"position":[740,-860]},{"parameters":{"promptType":"define","text":"=r√©√©crire cette description d'offre d'emploi en la structurant avec un maximum 1950 caract√®res , garde les informations importantes , telle que les valeurs d'entreprise , le contenu de la mission , les comp√©tences demand√©es. Tu √©criras toujours en fran√ßais; l'output doit absolument √™tre inferieur √† 1950 caract√®res. r√©ponds toujours en fran√ßais. Tu utiliseras du text rich et des √©motic√¥nes pour rendre le tout attrayant.\nvoici la description √† r√©ecrire: {{ $json.description }}"},"type":"@n8n/n8n-nodes-langchain.chainLlm","typeVersion":1.5,"position":[-620,-740],"id":"ee1988fb-012b-4693-a41b-715b7599737e","name":"Resume Offre","notesInFlow":false,"notes":"Reduction de la taille de l'offre √† 2000 caract√®res maximum , car un texte plus long ne passe pas dans Notion"},{"parameters":{"content":"# Ajout des offres Indeed dans Notion","height":580,"width":1560,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-1360,-1000],"id":"b711e208-9706-4686-823b-25d2d054774c","name":"Sticky Note3"},{"parameters":{"url":"=https://www.googleapis.com/drive/v3/changes/startPageToken","authentication":"predefinedCredentialType","nodeCredentialType":"googleOAuth2Api","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3780,780],"id":"41b57e70-e6c3-4693-b448-ea6462ef6e7b","name":"trigger drive","credentials":{"googleDriveOAuth2Api":{"id":"Mu7yxTxQSL3Ke6rX","name":"Google Drive account"},"googleOAuth2Api":{"id":"a5S9ixTP4lB5QlxR","name":"Google account"}}},{"parameters":{"rule":{"interval":[{"field":"hours","hoursInterval":8,"triggerAtMinute":7}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-2460,-740],"id":"313986c8-9842-4071-aef4-baf25f0f756c","name":"Schedule Trigger1"},{"parameters":{"fileSelector":"/data/shared/fichiersConnus.json","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-720,-160],"id":"d4e0c274-827d-4758-96d0-a05bb4b5a7b1","name":"Read fichiersConnus.json","alwaysOutputData":true},{"parameters":{"operation":"write","fileName":"/data/shared/fichiersConnus.json","dataPropertyName":"=data","options":{"append":false}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[540,-160],"id":"1a30b356-c6fc-4f51-842e-1396203d1d71","name":"Write fichiersConnus.json","alwaysOutputData":true},{"parameters":{"url":"=https://www.googleapis.com/drive/v3/changes\n","authentication":"predefinedCredentialType","nodeCredentialType":"googleDriveOAuth2Api","sendQuery":true,"queryParameters":{"parameters":[{"name":"pageToken","value":"={{ \n  ($json.data?.newStartPageToken || $json.data?.[0]?.startPageToken || '')\n    .toString()\n    .replace(/\\s+/g, '') \n}}"},{"name":"fields","value":"changes(file(id, name, mimeType, parents, trashed, modifiedTime)), newStartPageToken"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-240,-160],"id":"c2d95873-15e7-424e-8a2c-54261b234a8a","name":"List file created or updated","credentials":{"googleDriveOAuth2Api":{"id":"Mu7yxTxQSL3Ke6rX","name":"Google Drive account"}}},{"parameters":{"jsCode":"try {\n    console.log(\"üìå D√©but de l'ex√©cution du script...\");\n\n    if (!$input.first().json || !$input.first().json.changes) {\n        console.log(\"‚ö†Ô∏è Aucune donn√©e de modification re√ßue.\");\n        return [{ message: \"Aucune donn√©e de modification re√ßue.\" }];\n    }\n\n    console.log(\"‚úÖ Donn√©es de modification re√ßues :\", $input.first().json.changes);\n\n    // üìå ID du dossier √† surveiller\n    const dossierCible = \"14_J1f0oA1suFfSv1Ae6SfqpikSzPm3XY\";\n\n    // R√©cup√©rer les changements (modifi√©s, ajout√©s, supprim√©s)\n    let fichiersAnciens = $json.fichiersConnus ? $json.fichiersConnus.changes || [] : [];\n    let fichiersConnus = { ...$json.fichiersConnus };\n\n    let fichiersAjoutes = [];\n    let fichiersModifies = [];\n    let fichiersSupprimes = [];\n\n    // Analyse des changements\n    $input.first().json.changes.forEach(change => {\n        const file = change.file;\n        if (!file) return;\n\n        const fileId = file.id;\n        const fileName = file.name;\n        const modifiedTime = file.modifiedTime;\n        const parentFolderId = file.parents ? file.parents[0] : \"Inconnu\";\n\n        // V√©rifier si le fichier appartient au dossier cible\n        if (!file.parents || !file.parents.includes(dossierCible)) {\n            return;\n        }\n\n        console.log(`üîç Analyse du fichier : ${fileName} (ID: ${fileId})`);\n\n        if (file.trashed) {\n            console.log(`üóëÔ∏è Fichier supprim√© d√©tect√© : ${fileName}`);\n            fichiersSupprimes.push({\n                fileId,\n                fileName,\n                modifiedTime,\n                parentFolderId,\n                status: \"Supprim√©\"\n            });\n\n            // Supprimer le fichier du suivi\n            delete fichiersConnus[fileId];\n\n        } else if (!fichiersAnciens.some(f => f.file.id === fileId)) {\n            console.log(`‚ûï Fichier ajout√© d√©tect√© : ${fileName}`);\n            fichiersAjoutes.push({\n                fileId,\n                fileName,\n                modifiedTime,\n                parentFolderId,\n                status: \"Ajout√©\"\n            });\n\n            fichiersConnus[fileId] = { fileName, modifiedTime };\n\n        } else {\n            console.log(`‚úèÔ∏è Fichier modifi√© d√©tect√© : ${fileName}`);\n            fichiersModifies.push({\n                fileId,\n                fileName,\n                modifiedTime,\n                parentFolderId,\n                status: \"Modifi√©\"\n            });\n\n            fichiersConnus[fileId] = { fileName, modifiedTime };\n        }\n    });\n\n    console.log(\"üìÇ Fichiers ajout√©s :\", fichiersAjoutes);\n    console.log(\"üìÇ Fichiers modifi√©s :\", fichiersModifies);\n    console.log(\"üóëÔ∏è Fichiers supprim√©s :\", fichiersSupprimes);\nif ($input.first().json.newStartPageToken) {\n    fichiersConnus.newStartPageToken = $input.first().json.newStartPageToken;\n    console.log(\"‚úÖ Nouveau startPageToken d√©tect√© :\", fichiersConnus.newStartPageToken);\n} else {\n    console.warn(\"‚ö†Ô∏è Aucun nouveau startPageToken d√©tect√©.\");\n}\n    return {\n        ajoutes: fichiersAjoutes.length > 0 ? fichiersAjoutes : [{ message: \"Aucun fichier ajout√©.\" }],\n        modifies: fichiersModifies.length > 0 ? fichiersModifies : [{ message: \"Aucun fichier modifi√©.\" }],\n        supprimes: fichiersSupprimes.length > 0 ? fichiersSupprimes : [{ message: \"Aucun fichier supprim√©.\" }],\n        fichiersConnus: fichiersConnus // Mise √† jour de fichiersConnus.json\n    };\n\n} catch (error) {\n    console.error(\"‚ùå Erreur dans le script :\", error.message);\n    return [{ error: `Une erreur est survenue : ${error.message}` }];\n}\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-20,-160],"id":"a59501dd-ed71-4e0d-8e5f-b45544acbb15","name":"Get modif"},{"parameters":{"jsCode":"try {\n    console.log(\"üìå D√©but du script pour sauvegarder les fichiers connus.\");\n\n    // V√©rifie si fichiersConnus existe, sinon initialise un objet vide\n    let fichiersConnus = $json[\"fichiersConnus\"];\n    \n    if (!fichiersConnus || Object.keys(fichiersConnus).length === 0) {\n        console.warn(\"‚ö†Ô∏è Aucun fichier connu d√©tect√©. Initialisation d'un objet vide.\");\n        fichiersConnus = { message: \"Aucun fichier connu enregistr√©.\" };\n    }\n\n    console.log(\"‚úÖ Contenu des fichiers connus avant conversion :\", fichiersConnus);\n\n    // Convertit l'objet JSON en une cha√Æne JSON\n    const jsonString = JSON.stringify(fichiersConnus, null, 2);\n\n    // V√©rifie que la conversion a bien fonctionn√©\n    if (!jsonString || jsonString.trim() === \"{}\") {\n        throw new Error(\"‚ö†Ô∏è Erreur : fichiersConnus.json est vide ou mal form√©.\");\n    }\n\n    console.log(\"‚úÖ Contenu JSON g√©n√©r√© avec succ√®s :\", jsonString);\n\n    // Conversion en binaire\n    const binaryData = Buffer.from(jsonString, 'utf8').toString('base64');\n    console.log(\"‚úÖ Conversion en binaire r√©ussie.\");\n\n    return {\n        json: {},\n        binary: {\n            data: {\n                data: binaryData,\n                mimeType: 'application/json',\n                fileName: 'fichiersConnus.json'\n            }\n        }\n    };\n\n} catch (error) {\n    console.error(\"‚ùå Erreur dans 'Convert json in binary' :\", error.message);\n    return [{ json: { error: error.message } }];\n}\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[240,-160],"id":"18f20677-9350-40f4-ab77-140e0e9fdd1a","name":"Convert json in bynary"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"952191fa-0a8b-412a-83ae-77cfa9d7881d","leftValue":"={{ $json.file_id }}","rightValue":"","operator":{"type":"string","operation":"notEmpty","singleValue":true}},{"id":"40d303ce-e687-48c7-96f9-e59b2fca15c7","leftValue":"={{ $json.folder_id }}","rightValue":"{{ $json.folder_id !== null }}","operator":{"type":"string","operation":"notEmpty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-720,380],"id":"0189d239-d6f7-40af-9c66-adedd4bc2728","name":"file_exist"},{"parameters":{},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-980,-160],"id":"c3eb7b78-38b6-4531-a98d-b6c2eb6df299","name":"Wait","webhookId":"d82daf79-d950-42e1-8202-3fad9c7ffc18"},{"parameters":{"method":"POST","url":"=https://www.googleapis.com/drive/v3/files/14_J1f0oA1suFfSv1Ae6SfqpikSzPm3XY/watch","authentication":"predefinedCredentialType","nodeCredentialType":"googleOAuth2Api","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"id\": \"n8n-watch-{{ Math.random().toString(36).substr(2, 9) }}\",\n  \"type\": \"web_hook\",\n  \"address\": \"https://popular-shrew-implicitly.ngrok-free.app/webhook/google-drive\",\n  \"token\": \"dssetsggssg894645{{ Date.now() }}\"\n}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3780,580],"id":"24db66fc-78c7-45a9-8374-ffc8dc0db5aa","name":"Watch Google Drive","credentials":{"googleDriveOAuth2Api":{"id":"Mu7yxTxQSL3Ke6rX","name":"Google Drive account"},"googleOAuth2Api":{"id":"a5S9ixTP4lB5QlxR","name":"Google account"}}},{"parameters":{"httpMethod":"POST","path":"/google-drive","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":1,"position":[-1220,-160],"id":"89f3e0d0-5055-4788-9384-f25557f319de","name":"Google Drive Webhook","webhookId":"84e89f61-08fb-4d56-9bd3-cd70bca1f95e"},{"parameters":{"operation":"write","fileName":"/data/shared/fichiersConnus.json","dataPropertyName":"=fichiersConnus","options":{"append":false}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[-3660,1320],"id":"d9c6f303-ca21-4eaa-b416-6de5d186704e","name":"Write fichiersConnus.json1"},{"parameters":{"rule":{"interval":[{"field":"hours"}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-4100,780],"id":"c84b9756-161d-4b12-a6d9-41bf4349f0e0","name":"Schedule Trigger"},{"parameters":{"rule":{"interval":[{"field":"minutes","minutesInterval":55}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-4080,580],"id":"82d426da-7d08-482b-be29-11cffe542e61","name":"Schedule Trigger2"},{"parameters":{},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-3460,580],"id":"cd57d580-7f0c-4ab4-a186-f16ad367c1a7","name":"Wait1","webhookId":"4f21e758-42f7-49e7-ac09-8b536a1e5a7b"},{"parameters":{"assignments":{"assignments":[{"id":"6e08718e-ee60-43f1-b7ec-d082799da981","name":"startPageToken","value":"={{ $json.startPageToken }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3500,780],"id":"c68740dc-7883-4a9c-9e8b-bfc4e4b117dc","name":"Set startPageToken"},{"parameters":{"operation":"fromJson","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-480,-160],"id":"8d329919-fbfc-4c2f-9d7e-87b124a1bceb","name":"Extract from File"},{"parameters":{"functionCode":"return [{ json: { startPageToken: $json[\"startPageToken\"] } }];"},"name":"Create JSON","type":"n8n-nodes-base.function","typeVersion":1,"position":[-3260,780],"id":"d816bb70-0bac-4d03-ae8e-f1edd901377c"},{"parameters":{"fileName":"/data/shared/fichiersConnus.json","options":{}},"name":"Write to File1","type":"n8n-nodes-base.writeBinaryFile","typeVersion":1,"position":[-2820,780],"id":"7a4a3c9a-3d11-4c3e-b177-c001d31c5b4a"},{"parameters":{"operation":"toJson","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-3060,780],"id":"80c66034-11c7-432d-87bd-2b23b4db56b2","name":"Convert to File"},{"parameters":{"assignments":{"assignments":[{"id":"48b8be31-4e49-48b8-b10c-3ce5e0536a9e","name":"data","value":"={{ $json.data }}","type":"string"}]},"options":{}},"id":"8bc6c5ef-c6b1-43dc-b82f-9c6dd48c21a5","name":"Prep Incoming Doc","type":"n8n-nodes-base.set","position":[20,1720],"typeVersion":3.3},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"operator":{"type":"string","operation":"equals"},"leftValue":"={{ $('List file created or updated').item.json.changes[0].file.mimeType }}","rightValue":"pdf"}],"combinator":"and"},"renameOutput":true,"outputKey":"pdf"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"3a5f509d-46fe-490c-95f0-35124873c63e","operator":{"name":"filter.operator.equals","type":"string","operation":"equals"},"leftValue":"=={{$json.name.split('.').pop()}}","rightValue":"docx"}],"combinator":"and"},"renameOutput":true,"outputKey":"docx"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"99a53afc-558d-42e3-9948-eb1639995781","leftValue":"={{$json.name.split('.').pop()}}","rightValue":"xls","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"xls"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"9115dcc0-726f-4e0d-8e7d-f1cdaa62d683","leftValue":"={{$json.name.split('.').pop()}}","rightValue":"xlsx","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"xlsx"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"381c30bd-49c0-4115-b9bf-6f28e5ee3346","leftValue":"={{$json.name.split('.').pop()}}","rightValue":"csv","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"csv"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"ce5e2035-d87a-4ce9-bb3f-0703cedfbdd4","leftValue":"={{$json.name.split('.').pop()}}","rightValue":"html","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"html"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"9adbaccc-696e-4a86-aba7-80536dc68fe9","leftValue":"={{$json.name.split('.').pop()}}","rightValue":"xml","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"xml"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"14852fef-8b5b-4765-ac2c-bbc3e55add04","leftValue":"={{$json.name.split('.').pop()}}","rightValue":"ods","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"ods"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"311c7da9-c24b-4b07-9a17-7c75f0d82204","leftValue":"={{$json.name.split('.').pop()}}","rightValue":"rtf","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"rtf"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"e9026dde-24ee-4228-a6db-48a802c5359c","leftValue":"={{ $('List file created or updated').item.json.changes[0].file.mimeType }}","rightValue":"application/vnd.google-apps.document","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"txt"}]},"options":{}},"id":"e5166bd6-c7bb-431d-8c6a-8ab176cb28b7","name":"Get FileType","type":"n8n-nodes-base.switch","position":[-780,1580],"typeVersion":3},{"parameters":{"operation":"pdf","options":{}},"id":"2912ab94-308f-4ef1-8998-e976f6eca2a6","name":"Extract from PDF","type":"n8n-nodes-base.extractFromFile","position":[-320,920],"typeVersion":1},{"parameters":{"operation":"ods","options":{}},"id":"2f294ee2-1009-43cb-ae8f-62c171d3a186","name":"Extract from DOCX","type":"n8n-nodes-base.extractFromFile","position":[-320,1120],"typeVersion":1},{"parameters":{"operation":"text","options":{}},"id":"4fc3cb3d-f487-49c7-814e-5398774cbae3","name":"Extract from TEXT","type":"n8n-nodes-base.extractFromFile","position":[-320,2480],"typeVersion":1},{"parameters":{"operation":"rtf","options":{}},"id":"9b11f70c-af0f-418b-9853-dd818fa05ad4","name":"Extract from RTF","type":"n8n-nodes-base.extractFromFile","position":[-320,2300],"typeVersion":1},{"parameters":{"options":{}},"id":"5611f0e9-f4f9-40fc-b967-fc0692b38e4f","name":"Extract from CSV","type":"n8n-nodes-base.extractFromFile","position":[-320,1620],"typeVersion":1},{"parameters":{"operation":"html","options":{}},"id":"33ddf516-21d2-41f9-95f9-5603c596e4fa","name":"Extract from HTML","type":"n8n-nodes-base.extractFromFile","position":[-320,1800],"typeVersion":1},{"parameters":{"operation":"fromJson","options":{}},"id":"a9fec590-585f-4b17-b564-ce0414e39551","name":"Extract from JSON","type":"n8n-nodes-base.extractFromFile","position":[-4160,1900],"typeVersion":1},{"parameters":{"operation":"ods","options":{}},"id":"647b89f8-606d-4c6f-92bf-02686f6f53f5","name":"Extract from ODS","type":"n8n-nodes-base.extractFromFile","position":[-320,2140],"typeVersion":1},{"parameters":{"operation":"xml","options":{}},"id":"b2bf50b3-08bc-4ef0-983f-56c7e05168b0","name":"Extract from XML","type":"n8n-nodes-base.extractFromFile","position":[-320,1980],"typeVersion":1},{"parameters":{"operation":"xls","options":{}},"id":"a6564072-1863-4384-8647-ae104ae54489","name":"Extract from XLS","type":"n8n-nodes-base.extractFromFile","position":[-320,1300],"typeVersion":1},{"parameters":{"operation":"xlsx","options":{}},"id":"27239597-4b2f-4044-87a3-92a8928b50b8","name":"Extract from XLSX","type":"n8n-nodes-base.extractFromFile","position":[-320,1460],"typeVersion":1},{"parameters":{"mode":"combine","advanced":true,"mergeByFields":{"values":[{"field1":"property_r_f_rence","field2":"id"}]},"joinMode":"keepNonMatches","outputDataFrom":"input2","options":{}},"type":"n8n-nodes-base.merge","typeVersion":3,"position":[-1060,-740],"id":"c7c16877-101b-4a8e-9896-a6c960f4eb70","name":"Compare nouvelles offres"},{"parameters":{"resource":"databasePage","operation":"getAll","databaseId":{"__rl":true,"value":"cd874998-c309-48d0-984c-db009335a4e4","mode":"list","cachedResultName":"Offres d‚Äôemploi","cachedResultUrl":"https://www.notion.so/cd874998c30948d0984cdb009335a4e4"},"returnAll":true,"options":{}},"type":"n8n-nodes-base.notion","typeVersion":2.2,"position":[-1280,-940],"id":"d625b014-b010-4a69-94f2-8c46fbb00b11","name":"Get all offres","executeOnce":true,"credentials":{"notionApi":{"id":"ZIBjC8b9OWhjO7wH","name":"Notion account"}}},{"parameters":{"operation":"text","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[-80,180],"id":"0fa7d6a6-9ac5-41e8-80ff-f2c1474b4def","name":"Extract from File1"},{"parameters":{"fromEmail":"admin@ogasphere.com","toEmail":"olivier@ogasphere.com","subject":"Nouvelles offres sur espace Notion","emailFormat":"text","text":"={{ $json.properties.Poste.rich_text[0].text.content }} √† {{ $json.properties.Lieu.rich_text[0].text.content }}\n\n{{ $json.properties['D√©tail de l\\'offre'].rich_text[0].text.content }}\n\n","options":{"appendAttribution":false}},"type":"n8n-nodes-base.emailSend","typeVersion":2.1,"position":[-20,-740],"id":"a7e072f0-f728-4dcc-abc9-f23def455c86","name":"Send Email","webhookId":"46712e0e-2754-4be7-b936-474c43e26cc4","credentials":{"smtp":{"id":"BFxxrck91gjtFnNO","name":"SMTP o2Switch"}}},{"parameters":{"values":{"string":[{"name":"q","value":"technicien methodes"},{"name":"locality","value":"fr"},{"name":"page","value":"1"},{"name":"sort","value":"date"},{"name":"location","value":"cluses"}]},"options":{}},"name":"Set Search Parameters1","type":"n8n-nodes-base.set","typeVersion":1,"position":[-2200,-980],"id":"d1836635-eec6-4857-a928-a6c6bd8e238b"},{"parameters":{"amount":7},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1940,-980],"id":"d9d4d5d2-9677-4746-ba64-57ee75f337c6","name":"Wait2","webhookId":"9d274ebe-aa55-4024-8297-aa73dd33b1c7"},{"parameters":{"amount":1,"unit":"minutes"},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1940,-720],"id":"e5744227-58b4-4993-b26f-ed9fc2c4cc24","name":"Wait3","webhookId":"9d274ebe-aa55-4024-8297-aa73dd33b1c7"},{"parameters":{"amount":10},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1940,-520],"id":"f7ec614a-3a5d-4a7b-95a9-f687d3d14a3d","name":"Wait4","webhookId":"9d274ebe-aa55-4024-8297-aa73dd33b1c7"},{"parameters":{"resource":"databasePage","databaseId":{"__rl":true,"value":"cd874998-c309-48d0-984c-db009335a4e4","mode":"list","cachedResultName":"Offres d‚Äôemploi","cachedResultUrl":"https://www.notion.so/cd874998c30948d0984cdb009335a4e4"},"title":"={{ $('run Actor Indeed').item.json.company }}","simple":false,"propertiesUi":{"propertyValues":[{"key":"Lieu|rich_text","textContent":"={{ $('run Actor Indeed').item.json.location }}"},{"key":"Type contrat|multi_select","multiSelectValue":"={{ $('run Actor Indeed').item.json.jobType }}"},{"key":"Date de l'offre|date","includeTime":"=","date":"={{ $('run Actor Indeed').item.json.postingDateParsed }}","timezone":"Europe/Paris"},{"key":"Poste|rich_text","textContent":"={{ $('run Actor Indeed').item.json.positionName }}"},{"key":"R√©f√©rence|rich_text","textContent":"={{ $('run Actor Indeed').item.json.id }}"},{"key":"Url de l'offre|url","urlValue":"={{ $('run Actor Indeed').item.json.url }}"},{"key":"D√©tail de l'offre|rich_text","textContent":"={{ ( $json.text|| \"\").substring(0,2000) }}"},{"key":"Date scraping|date","date":"={{ $('Compare nouvelles offres').item.json.scrapedAt }}","timezone":"Europe/Paris"}]},"blockUi":{"blockValues":[{"type":"heading_1","textContent":"={{ $('run Actor Indeed').item.json.company }} {{ $('run Actor Indeed').item.json.location}}"},{"type":"heading_2","textContent":"={{ $('run Actor Indeed').item.json.positionName }} {{ $('run Actor Indeed').item.json.postedAt}} {{ $('run Actor Indeed').item.json.salary}} {{ $('run Actor Indeed').item.json.jobType }}"},{"textContent":"={{ ( $json.text|| \"\").substring(0,2000) }}"}]},"options":{}},"type":"n8n-nodes-base.notion","typeVersion":2.2,"position":[-240,-740],"id":"5fe67b58-9f4b-47e4-aede-f261b638766d","name":"Ajout dans Notion","credentials":{"notionApi":{"id":"ZIBjC8b9OWhjO7wH","name":"Notion account"}}},{"parameters":{"fieldToSplitOut":"description","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[-840,-740],"id":"5871c0bf-5e16-4cc8-9a33-7af6c2448433","name":"Split Out"}],"connections":{"Set Search Parameters":{"main":[[{"node":"Wait3","type":"main","index":0},{"node":"Wait4","type":"main","index":0}]]},"Jobs API":{"main":[[]]},"JSearch API":{"main":[[]]},"Ollama Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Notion":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"run Actor Indeed":{"main":[[{"node":"Get all offres","type":"main","index":0},{"node":"Compare nouvelles offres","type":"main","index":1}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Resume Offre","type":"ai_languageModel","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"AI Agent1","type":"ai_memory","index":0}]]},"Ollama Model":{"ai_languageModel":[[{"node":"Vector Store Tool","type":"ai_languageModel","index":0}]]},"Vector Store Tool":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]},"Embeddings Ollama":{"ai_embedding":[[{"node":"Qdrant Vector Store","type":"ai_embedding","index":0}]]},"Set File ID":{"main":[[{"node":"file_exist","type":"main","index":0}]]},"Download File":{"main":[[{"node":"Get FileType","type":"main","index":0},{"node":"Extract from File1","type":"main","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Qdrant Vector Store Insert","type":"ai_document","index":0}]]},"Recursive Character Text Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"Embeddings Ollama1":{"ai_embedding":[[{"node":"Qdrant Vector Store Insert","type":"ai_embedding","index":0}]]},"When chat message received":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Qdrant Vector Store":{"ai_vectorStore":[[{"node":"Vector Store Tool","type":"ai_vectorStore","index":0}]]},"Clear Old Vectors":{"main":[[{"node":"Download File","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"AI Agent1","type":"main","index":0}]]},"Local File Trigger":{"main":[[{"node":"Set File ID1","type":"main","index":0}]]},"Set File ID1":{"main":[[{"node":"Read/Write Files from Disk","type":"main","index":0}]]},"Ollama Chat Model1":{"ai_languageModel":[[{"node":"AI Agent1","type":"ai_languageModel","index":0}]]},"AI Agent1":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Resume Offre":{"main":[[{"node":"Ajout dans Notion","type":"main","index":0}]]},"trigger drive":{"main":[[{"node":"Set startPageToken","type":"main","index":0}]]},"Schedule Trigger1":{"main":[[{"node":"Set Search Parameters","type":"main","index":0},{"node":"Set Search Parameters1","type":"main","index":0}]]},"Read fichiersConnus.json":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"List file created or updated":{"main":[[{"node":"Get modif","type":"main","index":0}]]},"Get modif":{"main":[[{"node":"Convert json in bynary","type":"main","index":0},{"node":"Set File ID","type":"main","index":0}]]},"Convert json in bynary":{"main":[[{"node":"Write fichiersConnus.json","type":"main","index":0}]]},"Read/Write Files from Disk":{"main":[[]]},"file_exist":{"main":[[{"node":"Clear Old Vectors","type":"main","index":0}]]},"Wait":{"main":[[{"node":"Read fichiersConnus.json","type":"main","index":0}]]},"Google Drive Webhook":{"main":[[{"node":"Wait","type":"main","index":0}]]},"Watch Google Drive":{"main":[[{"node":"Wait1","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"trigger drive","type":"main","index":0}]]},"Schedule Trigger2":{"main":[[{"node":"Watch Google Drive","type":"main","index":0}]]},"Wait1":{"main":[[]]},"Set startPageToken":{"main":[[{"node":"Create JSON","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"List file created or updated","type":"main","index":0}]]},"Create JSON":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Write to File1":{"main":[[]]},"Convert to File":{"main":[[{"node":"Write to File1","type":"main","index":0}]]},"Get FileType":{"main":[[{"node":"Extract from PDF","type":"main","index":0}],[{"node":"Extract from DOCX","type":"main","index":0}],[{"node":"Extract from XLS","type":"main","index":0}],[{"node":"Extract from XLSX","type":"main","index":0}],[{"node":"Extract from CSV","type":"main","index":0}],[{"node":"Extract from HTML","type":"main","index":0}],[{"node":"Extract from XML","type":"main","index":0}],[{"node":"Extract from ODS","type":"main","index":0}],[{"node":"Extract from RTF","type":"main","index":0}],[{"node":"Extract from TEXT","type":"main","index":0}]]},"Extract from PDF":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from DOCX":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from TEXT":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from XLS":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from XLSX":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from CSV":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from HTML":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from XML":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from ODS":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Extract from RTF":{"main":[[{"node":"Prep Incoming Doc","type":"main","index":0}]]},"Prep Incoming Doc":{"main":[[{"node":"Qdrant Vector Store Insert","type":"main","index":0}]]},"Compare nouvelles offres":{"main":[[{"node":"Split Out","type":"main","index":0}]]},"Get all offres":{"main":[[{"node":"Compare nouvelles offres","type":"main","index":0}]]},"Extract from File1":{"main":[[]]},"Set Search Parameters1":{"main":[[{"node":"Wait2","type":"main","index":0}]]},"Wait2":{"main":[[{"node":"run Actor Indeed","type":"main","index":0}]]},"Wait3":{"main":[[{"node":"Jobs API","type":"main","index":0}]]},"Wait4":{"main":[[{"node":"JSearch API","type":"main","index":0}]]},"Ajout dans Notion":{"main":[[{"node":"Send Email","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"Resume Offre","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Notion Trigger":{"lastTimeChecked":"2025-02-14T08:40:00.000Z"},"node:File Created":{"lastTimeChecked":"2025-02-14T09:07:16Z"},"node:File Updated":{"lastTimeChecked":"2025-02-14T09:06:58Z"},"node:Schedule Trigger":{"recurrenceRules":[]},"node:Schedule Trigger1":{"recurrenceRules":[12]},"node:Schedule Trigger2":{"recurrenceRules":[]},"node:Google Drive Trigger":{"lastTimeChecked":"2025-02-21T12:44:16Z"}},"meta":{"templateCredsSetupCompleted":true},"pinData":{"Google Drive Webhook":[{"json":{"headers":{"host":"popular-shrew-implicitly.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","content-length":"0","accept":"*/*","accept-encoding":"gzip, deflate, br","x-forwarded-for":"66.102.8.132","x-forwarded-host":"popular-shrew-implicitly.ngrok-free.app","x-forwarded-proto":"https","x-goog-channel-expiration":"Wed, 19 Feb 2025 17:53:12 GMT","x-goog-channel-id":"n8n-watch-rmpmbqbje","x-goog-channel-token":"dssetsggssg8946451739983991409","x-goog-message-number":"1","x-goog-resource-id":"lxn_G3T6hPk0aNvYGdPSU-5pXjA","x-goog-resource-state":"sync","x-goog-resource-uri":"https://www.googleapis.com/drive/v3/files/14_J1f0oA1suFfSv1Ae6SfqpikSzPm3XY?alt=json&null"},"params":{},"query":{},"webhookUrl":"https://popular-shrew-implicitly.ngrok-free.app/webhook/google-drive","executionMode":"production"}}]},"versionId":"4f5ddf91-0299-425d-a854-1e10abfcb8dc","triggerCount":8,"tags":[],"repo_owner":"Olivier340","repo_name":"n8n-workflow","repo_path":"","subPath":"2025/02/"}