{"createdAt":"2025-02-12T15:58:57.915Z","updatedAt":"2025-02-13T06:30:05.562Z","id":"2u03ndcOHrMeXNZw","name":"Rag Agent Local V3","active":false,"nodes":[{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-180,0],"id":"c2b201eb-b45a-4013-9797-c4c9cb298b63","name":"When chat message received","webhookId":"10e16016-5916-4886-a0a4-226f8ad8b6aa"},{"parameters":{"hasOutputParser":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[40,0],"id":"475a7648-2a0b-4cfb-9841-dccb2e3ee177","name":"AI Agent","alwaysOutputData":true,"onError":"continueErrorOutput"},{"parameters":{"name":"compagny_database"},"type":"@n8n/n8n-nodes-langchain.toolVectorStore","typeVersion":1,"position":[220,200],"id":"3f4aeacb-d23c-4667-900e-b3dd047889c8","name":"Vector Store Tool"},{"parameters":{"qdrantCollection":{"__rl":true,"value":"texte_loi_français","mode":"list","cachedResultName":"texte_loi_français"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreQdrant","typeVersion":1,"position":[180,360],"id":"b05387e9-ae61-4931-b2a4-89c5a430061a","name":"Qdrant Vector Store","credentials":{"qdrantApi":{"id":"Aeqltub5twyeo8GY","name":"QdrantApi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1,"position":[480,360],"id":"b676b79c-dcef-42b7-ae35-65e1a65e3e86","name":"OpenAI Chat Model1","credentials":{"openAiApi":{"id":"d4zSwzevlcDFPS3v","name":"OpenAi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.1,"position":[240,520],"id":"4cf55ce2-da14-40bb-85d2-6a4a7ee7b772","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"d4zSwzevlcDFPS3v","name":"OpenAi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1,"position":[-60,240],"id":"890d5d34-ca34-4b17-a756-223728fee6bb","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"d4zSwzevlcDFPS3v","name":"OpenAi account"}}},{"parameters":{"operation":"create","base":{"__rl":true,"value":"appuJBHWCXCaoDwXa","mode":"list","cachedResultName":"Log Tracking","cachedResultUrl":"https://airtable.com/appuJBHWCXCaoDwXa"},"table":{"__rl":true,"value":"tbl4WBlGUD4hdAASn","mode":"list","cachedResultName":"Table 1","cachedResultUrl":"https://airtable.com/appuJBHWCXCaoDwXa/tbl4WBlGUD4hdAASn"},"columns":{"mappingMode":"defineBelow","value":{"Output":"={{ $json.output }}","agent":"=Local RAG","Time":"={{ $now }}","Log":"={{ $json[\"output\"] ? \"[]\" : ($json[\"message\"] ? \"error\" : \"unknown error\") }}","LLM Utilisé":"gpt 4o","Input":"={{ $('When chat message received').item.json.chatInput }}"},"matchingColumns":[],"schema":[{"id":"recordiD","displayName":"recordiD","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":true,"removed":true},{"id":"agent","displayName":"agent","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Input","displayName":"Input","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Output","displayName":"Output","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"LLM Utilisé","displayName":"LLM Utilisé","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Prompt de l'Agent","displayName":"Prompt de l'Agent","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Mémoire (postgres)","displayName":"Mémoire (postgres)","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":true},{"id":"Note/10 Input -> Output.","displayName":"Note/10 Input -> Output.","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Log","displayName":"Log","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Time","displayName":"Time","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[420,0],"id":"2b32a854-4dc9-4e53-b887-5138c69058ba","name":"Airtable"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[720,0],"id":"f1f8dc32-245c-406c-8ab8-0c0df331c58e","name":"When clicking ‘Test workflow’"},{"parameters":{"resource":"file","operation":"get","owner":{"__rl":true,"value":"Quentin-aq","mode":"name"},"repository":{"__rl":true,"value":"actual-backend-app","mode":"list","cachedResultName":"actual-backend-app","cachedResultUrl":"https://github.com/Quentin-aq/actual-backend-app"},"filePath":"Fra14562-1.pdf","additionalParameters":{}},"type":"n8n-nodes-base.github","typeVersion":1,"position":[920,0],"id":"bb320e5b-ea2f-4227-9ea7-e5d95542bf30","name":"GitHub","credentials":{"githubApi":{"id":"VK7usXEp6ZVGgyVU","name":"GitHub account"}}},{"parameters":{"operation":"pdf","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[720,220],"id":"438fff75-07ba-4c3a-80ba-fa700fcb776a","name":"Extract from File"},{"parameters":{"maxItems":30},"type":"n8n-nodes-base.limit","typeVersion":1,"position":[920,220],"id":"26c38cd3-9f78-4490-b815-e9080a3f06c8","name":"Limit"},{"parameters":{"mode":"insert","qdrantCollection":{"__rl":true,"value":"texte_loi_français","mode":"list","cachedResultName":"texte_loi_français"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreQdrant","typeVersion":1,"position":[1140,220],"id":"ac34d182-91ad-4993-bc69-908fe3787987","name":"Qdrant Vector Store1","credentials":{"qdrantApi":{"id":"Aeqltub5twyeo8GY","name":"QdrantApi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.1,"position":[980,400],"id":"04b83e56-e6b8-4ea3-8baf-db498cf2e34a","name":"Embeddings OpenAI1","credentials":{"openAiApi":{"id":"d4zSwzevlcDFPS3v","name":"OpenAi account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[1160,400],"id":"f38591b3-7abd-4625-9348-bafed06cc36a","name":"Default Data Loader"},{"parameters":{"separator":"\"\\n\\n\"","chunkOverlap":200},"type":"@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter","typeVersion":1,"position":[1220,560],"id":"d67f8622-4bf0-4bf4-b7e4-85536f6750f1","name":"Character Text Splitter"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[60,240],"id":"ca2d47bf-0188-4bd4-ba2f-81d3c24c7d8c","name":"Window Buffer Memory"}],"connections":{"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Airtable","type":"main","index":0}],[{"node":"Airtable","type":"main","index":0}]]},"Vector Store Tool":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Qdrant Vector Store":{"ai_vectorStore":[[{"node":"Vector Store Tool","type":"ai_vectorStore","index":0}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"Vector Store Tool","type":"ai_languageModel","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Qdrant Vector Store","type":"ai_embedding","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"When clicking ‘Test workflow’":{"main":[[{"node":"GitHub","type":"main","index":0}]]},"GitHub":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Limit","type":"main","index":0}]]},"Limit":{"main":[[{"node":"Qdrant Vector Store1","type":"main","index":0}]]},"Embeddings OpenAI1":{"ai_embedding":[[{"node":"Qdrant Vector Store1","type":"ai_embedding","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Qdrant Vector Store1","type":"ai_document","index":0}]]},"Character Text Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"Window Buffer Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"92324943-2cbe-4eb6-a3b6-183501ec3c51","triggerCount":0,"tags":[],"repo_owner":"Olivier340","repo_name":"n8n-worklow","repo_path":"","subPath":"2025/02/"}